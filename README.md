# Проектирование высоконагруженных сервисов
Курсовая работа в рамках 3-го семестра программы по Веб-разработке ОЦ VK x МГТУ им. Н.Э. Баумана (ex. "Технопарк") по дисциплине "Проектирование высоконагруженных сервисов"

#### Автор - [Ислам Османов](https://park.vk.company/profile/is.osmanov/ "Страница на портале VK x МГТУ")
#### Задание - [Методические указания](https://github.com/init/highload/blob/main/homework_architecture.md)

#### Содержание:
1. [Тема, функционал и аудитория](#1)

## Часть 1. Тема и целевая аудитория <a name="1"></a>

### Тема курсовой работы - **"Проектирование бизнес-мессенджера"**
В качестве примера и аналога выбран Slack.
Slack представляет собой бизнес-мессенджер, объединяющий людей с необходимой им информацией, превращая таким образом способ общения организаций. Основной особенностью Slack является поддержка тредов, что позволяет в рамках одного канала или чата создавать независимые ветки обсуждений, облегчая организацию и структурирование коммуникации. Кроме того, Slack интегрируется с большим количеством других служб, позволяя пользователям управлять проектами и задачами непосредственно из мессенджера. Являясь мощным средством коммуникации и сотрудничества, Slack легко адаптируется под потребности любой команды или организации.

### Ключевой функционал сервиса
- Регистрация и авторизация.
- Каналы: Открытые или закрытые каналы для различных проектов, отделов или тем, чтобы сохранять беседы организованными. Участники могут присоединяться, уходить или быть добавлены другими как требуется.
- Прямые сообщения (ПМ): Переписка с конкретным участником.
- Обмен файлами и хранение: Возможность делиться файлами, такими как изображения, документы, видео, электронные таблицы и т. д., непосредственно с компьютера.   
- Уведомления и Напоминания: Настройка персональных уведомлений на основе ключевых слов, упоминаний, каналов или прямых сообщений. Напоминания для установки дат окончания, повторов или других важных задач.
- Поиск: Находить прошедшие разговоры, файлы и информацию в каналах и прямых сообщениях.

### Ключевые продуктовые решения
- Треды: Cоздание отдельных веток обсуждений в рамках общего канала или чата. Они полезны для упорядочивания коммуникации и делают обсуждения более структурированными.
- Папки с каналами: Создание тематических папок с каналами.
- Реакции на сообщения в чатах/каналах.
- Бизнес боты.


### Целевая аудитория
- 65 млн пользователей по всему миру.[^1]
- 1.5 миллиарда сообщений в месяц.[^2]

## Часть 2. Расчёт нагрузки <a name="2"></a>

### Продуктовые метрики

- MAU - 65 млн пользователей [^1]
- DAU - 38.8 млн пользователей [^1]

### Средний размер харанилища на одного пользователя:
| Хранимые данные   | Размер на одного пользователя         |
|-------------------|------------------------------------------|
| Аватар              | `2 МБ`                            |
| Данные о пользователе             | `3 КБ`                     |

### Среднее количество действий пользователя в день

|Действие пользователя |Количество / день|
| ------------- |-------------|
|Регистрация|18.920 тыс|
|Авторизация|14.55 млн|
|Отправка сообщения|50 млн|
|Создание чатов|n|
|Создание каналов|n|
|Просмотр сообщений|n|
|Создание тредов|n|
|Создание папок|n|
|Реакции|n|

- По статистике пользователь остаётся онлайн в среднем 9 часов. Исходя из предоставленных данных, мы знаем, что в системе в среднем авторизовано 9 часов в сутки и что в сутки активно 38.8 млн пользователей. Чтобы выяснить, сколько в среднем авторизуется пользователей в сутки, мы можем использовать эти данные. Если каждый пользователь в среднем проводит в системе 9 часов, то общее количество часов, проведенных всеми активными пользователями в сутки, составляет
38.8 млн * 9 часов = 349.2 млн часов. Так как в сутках 24 часа, то общее количество авторизаций пользователей в сутки можно вычислить, разделив общее количество часов, проведенных всеми активными пользователями, на количество часов в сутках. То есть 349.2 млн часов / 24 часа = 14.55 млн авторизаций в сутки.[^2]
- После пандемии потребность в онлайн платформах ведения бизнеса выросла и Slack не стал исключением. После 2020-го года наблюдается активный рост новых пользователей. На основе статистических данных можно получить среднюю дневную активность пользователей за 5 лет ((47.2 - 38.8) + (38.8 - 32.3) + (32.3 - 25.7) + (25.7 - 19.2) + (19.2 - 12.6)) /  5 = 6.92 млн. 
Средняя дневная активность пользователей на сайте за 5 лет увеличилась на 6.92 млн пользователей в год. Это означает, что каждый день количество активных пользователей увеличивается примерно на 6.92 млн / 365 дней = 18920 новых пользователей в день.[^1]
- В месяц отправляется 1.5 миллиарда сообщений из этого следует, что в день в среднем отправляется приблизительно 1.5 млрд / 30 дней = 50 млн.

### Источники
[^1]: [MAU/DAU](https://www.statista.com/statistics/1025213/worldwide-slack-active-users/)
[^2]: [Detailed_statistics](https://techjury.net/blog/slack-statistics/)
